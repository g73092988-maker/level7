<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…Ø±Ø­Ù„Ù‡ Û¶ â€” Ø¢Ø²Ù…ÙˆÙ† Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ (A , B â€” ØªØ±Ú©ÛŒØ¨ÛŒ)</title>
<style>
  :root{
    --bg:#071028; --card:#0f2336; --accent:#66f0ff; --gold:#ffd67c;
    --good:#7ef3b0; --bad:#ff7b7b; --muted:#aee9f3aa;
  }
  *{box-sizing:border-box}
  body{
    margin:0; padding:22px; font-family: Vazirmatn, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: linear-gradient(180deg,#041022,#071429);
    color:#e8fbff; text-align:center;
  }
  h1{ margin:6px 0 10px; color:var(--accent); }
  p.lead{ color:var(--muted); margin-top:4px; }

  .container{ max-width:980px; margin:14px auto 60px; padding:16px; text-align:right; }

  .info{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04)); padding:14px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); margin-bottom:12px; color:#dff; }

  /* venn */
  .ven{ position:relative; height:340px; margin:18px auto; width:100%; max-width:760px; }
  .circle{ position:absolute; width:320px; height:320px; border-radius:50%; top:10px; transition:all .18s ease; }
  /* A and B positioned to overlap centered */
  #A { left: calc(50% - 240px); background: radial-gradient(circle at 30% 30%, rgba(110,160,255,0.12), transparent 40%), rgba(20,50,90,0.08); border:2px solid rgba(120,170,255,0.18); }
  #B { left: calc(50% - 80px); background: radial-gradient(circle at 70% 70%, rgba(160,255,200,0.06), transparent 40%), rgba(20,50,90,0.06); border:2px solid rgba(140,200,180,0.12); }
  /* subtle overlap curve by SVG mask (so they visually form a single smooth overlap) */
  #overlapMask{ position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; }

  .label{ position:absolute; top:10px; font-weight:900; color:#ffeaa8; font-size:18px; }
  .label.A{ left: calc(50% - 240px + 18px); } .label.B{ left: calc(50% - 80px + 232px); } /* place labels near circle edges */

  /* slots (numbers) */
  .slot{ position:absolute; font-weight:900; color:#eafcff; font-size:18px; user-select:none; transform:translate(-50%,-50%); }
  .slot.inter{ color:#ffd; } /* visually slightly different */

  /* quiz area */
  .quiz{ margin-top:12px; display:grid; gap:12px; grid-template-columns: 1fr; }

  .card{ background:var(--card); padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); text-align:right; }
  .question{ font-weight:800; margin-bottom:8px; color:#dff; }

  /* braces + flexible input (single input per question; students can type multiple numbers separated by comma)  */
  .braces{ font-weight:900; color:#ffd; display:inline-flex; align-items:center; gap:8px; direction:ltr; }
  .brace-open, .brace-close{ color:var(--gold); font-size:20px; }
  .num-input{ min-width:140px; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:rgba(255,255,255,0.02); color:#e8fbff; text-align:left; font-weight:800; direction:ltr; }

  .small-note{ color:var(--muted); font-size:13px; margin-top:6px; text-align:left; }

  /* true/false */
  .tf { display:flex; gap:12px; justify-content:flex-start; margin-top:6px; }
  .tf button{ padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:#e8fbff; cursor:pointer; }
  .tf button.selected{ box-shadow: 0 6px 18px rgba(102,240,255,0.06); background:linear-gradient(90deg,#02363b, #053a4a); }

  /* controls */
  .controls{ display:flex; gap:12px; justify-content:center; margin-top:14px; flex-wrap:wrap; }
  .btn{ padding:10px 16px; border-radius:10px; border:none; cursor:pointer; font-weight:900; color:#022; background:linear-gradient(90deg,#66f0ff,#9ef4c8); }
  .btn.ghost{ background:transparent; color:#9feaff; border:1px solid rgba(159,238,248,0.12); }

  /* timer */
  .timer{ font-weight:900; color:#ffd67c; }

  /* results */
  .results{ margin-top:16px; text-align:right; }
  .result-line{ display:flex; gap:10px; align-items:center; justify-content:space-between; padding:8px 10px; border-radius:8px; margin-bottom:8px; background: rgba(0,0,0,0.06); }
  .ok{ color:var(--good); font-weight:900; } .nok{ color:var(--bad); font-weight:900; }
  .explain{ color:#cfe; font-size:13px; margin-top:6px; }

  .final-q{ margin-top:12px; display:flex; gap:12px; justify-content:center; }

  @media (max-width:720px){
    .ven{ height:380px }
    .circle{ width:260px; height:260px; top:30px }
    #A{ left: calc(50% - 220px) } #B{ left: calc(50% - 60px) }
    .label.A{ left: calc(50% - 220px + 18px) } .label.B{ left: calc(50% - 60px + 202px) }
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Ù…Ø±Ø­Ù„Ù‡ Û¶ â€” Ø¢Ø²Ù…ÙˆÙ† ØªØ±Ú©ÛŒØ¨ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§</h1>
    <p class="lead">Ù†Ù…ÙˆØ¯Ø§Ø± Ùˆ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª â€” Ø²Ù…Ø§Ù†: <span class="timer" id="timer">05:00</span></p>

    <div class="info" id="infoBox" style="text-align:right;">
      <div>Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ (Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† â€” ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´):</div>
      <div style="margin-top:8px; font-weight:900;">A = { 1 , 2 , 3 , 4 , 5 , 9 } &nbsp;&nbsp;&nbsp; B = { 3 , 4 , 5 , 6 , 7 }</div>
      <div style="margin-top:8px; color:var(--muted)">Ù†Ù…ÙˆØ¯Ø§Ø±: Ø¯Ùˆ Ø¯Ø§ÛŒØ±Ù‡ Ú©Ù‡ Ù‡Ù…Ù¾ÙˆØ´Ø§Ù†ÛŒ Ø¯Ø§Ø±Ù†Ø¯ â€” Ø§Ø´ØªØ±Ø§Ú©Ù ÙˆØ³Ø· Ø´Ø§Ù…Ù„: 3 , 4 , 5</div>
    </div>

    <!-- Venn -->
    <div class="ven" aria-hidden="false">
      <!-- circles overlap by left coordinates above -->
      <div id="A" class="circle" aria-label="Ù…Ø¬Ù…ÙˆØ¹Ù‡ A"></div>
      <div id="B" class="circle" aria-label="Ù…Ø¬Ù…ÙˆØ¹Ù‡ B"></div>

      <svg id="overlapMask" viewBox="0 0 100 100" preserveAspectRatio="none" style="position:absolute; inset:0; width:100%; height:100%; pointer-events:none;">
        <!-- decorative only -->
      </svg>

      <div class="label A">A</div>
      <div class="label B">B</div>

      <!-- numbers placed to match overlapping: 3,4,5 are central (in intersection) -->
      <!-- A-only numbers (1,2,9) placed to the left area of overlap -->
      <div id="slot-1" class="slot" style="left: calc(50% - 240px + 80px); top:170px">Û±</div>
      <div id="slot-2" class="slot" style="left: calc(50% - 240px + 120px); top:220px">Û²</div>
      <div id="slot-9" class="slot" style="left: calc(50% - 240px + 100px); top:120px">Û¹</div>

      <!-- intersection numbers (center region) -->
      <div id="slot-3" class="slot inter" style="left:50%; top:160px">Û³</div>
      <div id="slot-4" class="slot inter" style="left:54%; top:200px">Û´</div>
      <div id="slot-5" class="slot inter" style="left:48%; top:240px">Ûµ</div>

      <!-- B-only numbers (6,7) to the right area of overlap -->
      <div id="slot-6" class="slot" style="left: calc(50% - 80px + 220px); top:130px">Û¶</div>
      <div id="slot-7" class="slot" style="left: calc(50% - 80px + 260px); top:230px">Û·</div>
    </div>

    <!-- quiz -->
    <div class="quiz" id="quizArea">

      <!-- Q1: B - A  (flexible input, students type numbers separated by comma) -->
      <div class="card" id="q1">
        <div class="question">Ø§Ù„Ù) Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†ÛŒØ¯: <strong dir="ltr">B âˆ’ A</strong> =</div>
        <div style="direction:ltr; display:flex; align-items:center; gap:8px; justify-content:flex-end;">
          <div class="braces" aria-hidden="true">
            <span class="brace-open">{</span>
            <input id="q1-input" class="num-input" placeholder="" aria-label="Ø¬ÙˆØ§Ø¨ B Ù…Ù†Ù‡Ø§ÛŒ A" />
            <span class="brace-close">}</span>
          </div>
        </div>
        <div class="small-note">Ø¹Ø¯Ø¯Ù‡Ø§ Ø±Ø§ Ø¨Ø§ ÙˆÛŒØ±Ú¯ÙˆÙ„ Ø¬Ø¯Ø§ Ú©Ù†. ØªØ¹Ø¯Ø§Ø¯ Ø¯Ù„Ø®ÙˆØ§Ù‡ â€” ØªØ±ØªÛŒØ¨ Ø§Ù‡Ù…ÛŒØªÛŒ Ù†Ø¯Ø§Ø±Ø¯. (Ù…Ø«Ø§Ù„ ØµØ­ÛŒØ­: <code>6,7</code>)</div>
      </div>

      <!-- Q2: n(A âˆª B) = 8 (no braces) -->
      <div class="card" id="q2">
        <div class="question">Ø¨) Ù…Ù‚Ø¯Ø§Ø±Ù Ø²ÛŒØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯: <strong dir="ltr">n(A âˆª B) =</strong></div>
        <div style="direction:ltr; display:flex; align-items:center; gap:8px; justify-content:flex-end;">
          <input id="q2-input" class="num-input" placeholder="" aria-label="n(A âˆª B)" />
        </div>
        <div class="small-note">Ø§ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± ÛŒÚ© Ø¹Ø¯Ø¯ Ø§Ø³Øª (Ø¨Ø¯ÙˆÙ† Ø¢Ú©ÙˆÙ„Ø§Ø¯). Ù…Ø«Ø§Ù„ ØµØ­ÛŒØ­: <code>8</code></div>
      </div>

      <!-- Q3: (A âˆ’ B) âˆª (A âˆ© B) = -->
      <div class="card" id="q3">
        <div class="question">Ø¬) Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†ÛŒØ¯: <strong dir="ltr">(A âˆ’ B) âˆª (A âˆ© B)</strong> =</div>
        <div style="direction:ltr; display:flex; align-items:center; gap:8px; justify-content:flex-end;">
          <div class="braces" aria-hidden="true">
            <span class="brace-open">{</span>
            <input id="q3-input" class="num-input" placeholder="" aria-label="Ø¬ÙˆØ§Ø¨ Ø¹Ø¨Ø§Ø±Øª Ø¬" />
            <span class="brace-close">}</span>
          </div>
        </div>
        <div class="small-note">Ø¢Ø²Ø§Ø¯: Ú†Ù†Ø¯ Ø¹Ø¯Ø¯ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯ØŒ Ø¨Ø§ ÙˆÛŒØ±Ú¯ÙˆÙ„ Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯. Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª Ø¨Ø±Ø§Ø¨Ø± Ù…Ø¬Ù…ÙˆØ¹Ù‡Ù” A Ø§Ø³Øª.</div>
      </div>

      <!-- Q4: {1,4} âˆˆ A ? -->
      <div class="card" id="q4">
        <div class="question">Ø¯) Ø¹Ø¨Ø§Ø±ØªÙ Ø²ÛŒØ± Ø¯Ø±Ø³Øª ÛŒØ§ Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ <strong dir="ltr">{1,4} âˆˆ A</strong></div>
        <div class="tf" role="radiogroup" aria-label="{1,4} Ø¹Ø¶Ùˆ A Ø§Ø³ØªØŸ">
          <button id="q4-true">Ø¯Ø±Ø³Øª</button>
          <button id="q4-false">Ù†Ø§Ø¯Ø±Ø³Øª</button>
        </div>
        <div class="small-note">Ø¯Ù‚Øª Ú©Ù†: Ù…Ù†Ø¸ÙˆØ± Ø§Ø² âˆˆ Ø¹Ø¶ÙˆÛŒØªÙ ÛŒÚ© Ø´ÛŒ Ø¯Ø± Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø§Ø³Øª (Ø±ÛŒØ§Ø¶ÛŒ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ú†Ù¾â†’Ø±Ø§Ø³Øª Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡).</div>
      </div>

      <!-- Q5: 7 âˆˆ B ? -->
      <div class="card" id="q5">
        <div class="question">Ù‡) Ø¹Ø¨Ø§Ø±ØªÙ Ø²ÛŒØ± Ø¯Ø±Ø³Øª ÛŒØ§ Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ <strong dir="ltr">7 âˆˆ B</strong></div>
        <div class="tf" role="radiogroup" aria-label="7 Ø¹Ø¶Ùˆ B Ø§Ø³ØªØŸ">
          <button id="q5-true">Ø¯Ø±Ø³Øª</button>
          <button id="q5-false">Ù†Ø§Ø¯Ø±Ø³Øª</button>
        </div>
      </div>

    </div> <!-- quiz -->

    <div class="controls">
      <button class="btn" id="startBtn">Ø´Ø±ÙˆØ¹ / Ø±ÛŒØ³Øª ØªØ§ÛŒÙ…Ø± (Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡)</button>
      <button class="btn ghost" id="finishBtn">Ù¾Ø§ÛŒØ§Ù† Ø¢Ø²Ù…ÙˆÙ† Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø¬ÙˆØ§Ø¨â€ŒÙ‡Ø§</button>
    </div>

    <div id="resultsArea" class="results" aria-live="polite"></div>

    <div id="finalChoice" style="display:none; margin-top:12px;">
      <div class="final-q">
        <div style="color:#dff; font-weight:900">Ø¢ÛŒØ§ Ø§ÛŒÙ† Ù…Ø¨Ø§Ø­Ø« Ø±Ø§ Ø®ÙˆØ¨ ÛŒØ§Ø¯ Ú¯Ø±ÙØªÛŒØŸ</div>
        <div style="display:flex; gap:8px">
          <button class="btn" id="learnedYes">Ø¨Ù„Ù‡</button>
          <button class="btn ghost" id="learnedNo">Ø®ÛŒØ±</button>
        </div>
      </div>
      <div id="learnedMsg" style="margin-top:8px; font-weight:900; color:#ffd67c"></div>
    </div>

  </div>

<script>
/* ---------- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ùˆ Ø¬ÙˆØ§Ø¨â€ŒÙ‡Ø§ (Ù¾Ù†Ù‡Ø§Ù† ØªØ§ Ø²Ù…Ø§Ù† Ø§ØªÙ…Ø§Ù… Ø¢Ø²Ù…ÙˆÙ†) ---------- */
const A = [1,2,3,4,5,9];
const B = [3,4,5,6,7];
const universe = [1,2,3,4,5,6,7,8,9];

const correctAnswers = {
  q1: [6,7],                 // B - A
  q2: 8,                     // n(A âˆª B)
  q3: [1,2,3,4,5,9],         // (Aâˆ’B) âˆª (Aâˆ©B) == A
  q4: false,                 // {1,4} âˆˆ A ? -> false
  q5: true                   // 7 âˆˆ B -> true
};

/* ---------- Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ ---------- */
const timerEl = document.getElementById('timer');
const startBtn = document.getElementById('startBtn');
const finishBtn = document.getElementById('finishBtn');
const resultsArea = document.getElementById('resultsArea');

const q1Input = document.getElementById('q1-input');
const q2Input = document.getElementById('q2-input');
const q3Input = document.getElementById('q3-input');

const q4True = document.getElementById('q4-true'), q4False = document.getElementById('q4-false');
const q5True = document.getElementById('q5-true'), q5False = document.getElementById('q5-false');

const finalChoice = document.getElementById('finalChoice');
const learnedYes = document.getElementById('learnedYes'), learnedNo = document.getElementById('learnedNo');
const learnedMsg = document.getElementById('learnedMsg');

let timerInterval = null;
let timeLeft = 300; // 5 minutes
let selectedQ4 = null, selectedQ5 = null;

/* ---------- Ú©Ù…Ú©ÛŒ: Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± ÙˆØ±ÙˆØ¯ÛŒÙ‡Ø§ (Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† ÙˆÛŒØ±Ú¯ÙˆÙ„ Ø¨ÛŒÙ† Ø§Ø¹Ø¯Ø§Ø¯ Ù‡Ù†Ú¯Ø§Ù… ØªØ§ÛŒÙ¾) ---------- */
function normalizeListString(s){
  // remove spaces, allow digits and commas only, compress multiple commas, trim
  return s.replace(/\s+/g,'').replace(/ï¼Œ/g,',').replace(/,+/g,',').replace(/[^0-9,]/g,'').replace(/^,|,$/g,'');
}
function inputListToArray(s){
  if(!s) return [];
  const norm = normalizeListString(s);
  if(norm === '') return [];
  return norm.split(',').filter(x=>x!=='').map(x=>Number(x));
}
[q1Input, q3Input].forEach(inp=>{
  inp.addEventListener('input', e=>{
    const caret = inp.selectionStart;
    const before = inp.value;
    const norm = normalizeListString(before);
    inp.value = norm;
    // try to keep caret roughly in place
    inp.setSelectionRange(Math.min(caret, inp.value.length), Math.min(caret, inp.value.length));
  });
});
q2Input.addEventListener('input', e=>{
  q2Input.value = q2Input.value.replace(/[^\d]/g,'');
});

/* ---------- Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø±Ø³Øª/Ù†Ø§Ø¯Ø±Ø³Øª (tf) ---------- */
function toggleTF(button, q){
  if(q === 'q4'){
    if(button === q4True){ selectedQ4 = true; q4True.classList.add('selected'); q4False.classList.remove('selected'); }
    else { selectedQ4 = false; q4False.classList.add('selected'); q4True.classList.remove('selected'); }
  } else {
    if(button === q5True){ selectedQ5 = true; q5True.classList.add('selected'); q5False.classList.remove('selected'); }
    else { selectedQ5 = false; q5False.classList.add('selected'); q5True.classList.remove('selected'); }
  }
}
q4True.addEventListener('click', ()=> toggleTF(q4True,'q4'));
q4False.addEventListener('click', ()=> toggleTF(q4False,'q4'));
q5True.addEventListener('click', ()=> toggleTF(q5True,'q5'));
q5False.addEventListener('click', ()=> toggleTF(q5False,'q5'));

/* ---------- ØªØ§ÛŒÙ…Ø± ---------- */
function formatTime(s){
  const mm = String(Math.floor(s/60)).padStart(2,'0');
  const ss = String(s%60).padStart(2,'0');
  return mm + ':' + ss;
}
function startTimer(){
  clearInterval(timerInterval);
  timeLeft = 300;
  timerEl.textContent = formatTime(timeLeft);
  timerInterval = setInterval(()=> {
    timeLeft--;
    timerEl.textContent = formatTime(timeLeft);
    if(timeLeft <= 0){
      clearInterval(timerInterval);
      autoFinish();
    }
  },1000);
}

/* ---------- Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ùˆ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ ---------- */
function asSetEqual(arr, arr2){
  const a = [...new Set(arr)].filter(x=>!Number.isNaN(x)).map(Number).sort((x,y)=>x-y);
  const b = [...new Set(arr2)].filter(x=>!Number.isNaN(x)).map(Number).sort((x,y)=>x-y);
  if(a.length !== b.length) return false;
  for(let i=0;i<a.length;i++) if(a[i] !== b[i]) return false;
  return true;
}

/* ---------- Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ùˆ Ù†Ù…Ø±Ù‡â€ŒØ¯Ù‡ÛŒ ---------- */
function gradeAll(){
  const lines = [];
  let total = 0;

  // Q1
  const arr1 = inputListToArray(q1Input.value);
  if(asSetEqual(arr1, correctAnswers.q1)){
    total += 10;
    lines.push({ id:'q1', ok:true, text:`Ø§Ù„Ù) Ø¯Ø±Ø³Øª â€” B âˆ’ A = { ${correctAnswers.q1.join(' ØŒ ')} } â€” Ù†Ù…Ø±Ù‡: 10` });
  } else {
    lines.push({ id:'q1', ok:false, text:`Ø§Ù„Ù) Ù†Ø§Ø¯Ø±Ø³Øª â€” Ø¬ÙˆØ§Ø¨ ØµØ­ÛŒØ­: { ${correctAnswers.q1.join(' ØŒ ')} }` });
  }

  // Q2 (number)
  const nVal = Number(q2Input.value.trim());
  if(!Number.isNaN(nVal) && nVal === correctAnswers.q2){
    total += 10;
    lines.push({ id:'q2', ok:true, text:`Ø¨) Ø¯Ø±Ø³Øª â€” n(A âˆª B) = ${correctAnswers.q2} â€” Ù†Ù…Ø±Ù‡: 10` });
  } else {
    lines.push({ id:'q2', ok:false, text:`Ø¨) Ù†Ø§Ø¯Ø±Ø³Øª â€” Ø¬ÙˆØ§Ø¨ ØµØ­ÛŒØ­: ${correctAnswers.q2}` });
  }

  // Q3
  const arr3 = inputListToArray(q3Input.value);
  if(asSetEqual(arr3, correctAnswers.q3)){
    total += 10;
    lines.push({ id:'q3', ok:true, text:`Ø¬) Ø¯Ø±Ø³Øª â€” (A âˆ’ B) âˆª (A âˆ© B) = { ${correctAnswers.q3.join(' ØŒ ')} } â€” Ù†Ù…Ø±Ù‡: 10` });
  } else {
    lines.push({ id:'q3', ok:false, text:`Ø¬) Ù†Ø§Ø¯Ø±Ø³Øª â€” Ø¬ÙˆØ§Ø¨ ØµØ­ÛŒØ­: { ${correctAnswers.q3.join(' ØŒ ')} }` });
  }

  // Q4: {1,4} âˆˆ A  â€” expected false
  if(selectedQ4 === null){
    lines.push({ id:'q4', ok:false, text:'Ø¯) Ù¾Ø§Ø³Ø®ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.' });
  } else {
    const ok = (selectedQ4 === correctAnswers.q4);
    if(ok){
      total += 10;
      // If student selected false -> correct -> message "Ø¢ÙØ±ÛŒÙ†"
      lines.push({ id:'q4', ok:true, text:`Ø¯) Ù¾Ø§Ø³Ø® Ø´Ù…Ø§ Ø¯Ø±Ø³Øª Ø§Ø³Øª â€” Ø¢ÙØ±ÛŒÙ†! "{1,4}" ÛŒÚ© Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø§Ø³Øª Ùˆ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÛŒÚ© Ø¹Ù†ØµØ± Ø¯Ø± A Ù†ÛŒØ³Øª.` });
    } else {
      // student chose 'Ø¯Ø±Ø³Øª' which is wrong
      lines.push({ id:'q4', ok:false, text:`Ø¯) Ù†Ø§Ø¯Ø±Ø³Øª â€” Ù†Ù‡Ø› Ø¯Ù‚Øª Ú©Ù†: Ù†Ø¨Ø§ÛŒØ¯ Ø§Ø¹Ø¯Ø§Ø¯ Ø±Ø§ Ø¯Ø§Ø®Ù„ Ø¢Ú©ÙˆÙ„Ø§Ø¯ Ø¨Ú¯Ø°Ø§Ø±ÛŒ Ùˆ Ø¨Ú¯ÙˆÛŒÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¯Ø± Ù…Ø¬Ù…ÙˆØ¹Ù‡ â€” "{1,4}" Ø¹Ù†ØµØ± A Ù†ÛŒØ³Øª.` });
    }
  }

  // Q5: 7 âˆˆ B -> true
  if(selectedQ5 === null){
    lines.push({ id:'q5', ok:false, text:'Ù‡) Ù¾Ø§Ø³Ø®ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.' });
  } else {
    const ok = (selectedQ5 === correctAnswers.q5);
    if(ok){
      total += 10;
      lines.push({ id:'q5', ok:true, text:`Ù‡) Ø¯Ø±Ø³Øª â€” Ø¢ÙØ±ÛŒÙ†! 7 âˆˆ B (Ø¹Ø¯Ø¯ Û· Ø¯Ø± B ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯).` });
    } else {
      lines.push({ id:'q5', ok:false, text:`Ù‡) Ù†Ø§Ø¯Ø±Ø³Øª â€” Ù†Ù‡Ø› Ø¹Ø¯Ø¯ Û· Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù…ÙˆØ¹Ù‡Ù” B ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.` });
    }
  }

  return { lines, total };
}

/* ---------- Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬ (ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø±Ø³Ø§Ù„) ---------- */
function showResults(res){
  resultsArea.innerHTML = '';
  res.lines.forEach(l=>{
    const div = document.createElement('div');
    div.className = 'result-line';
    const left = document.createElement('div');
    left.style.textAlign = 'right';
    left.innerHTML = `<div style="font-weight:900">${l.text}</div>`;
    const right = document.createElement('div'); right.style.minWidth = '110px';
    if(l.ok) right.innerHTML = `<span class="ok">âœ” Ø¯Ø±Ø³Øª</span>`; else right.innerHTML = `<span class="nok">âœ– ØºÙ„Ø·</span>`;
    div.appendChild(left); div.appendChild(right);
    resultsArea.appendChild(div);
  });
  const sum = document.createElement('div');
  sum.style.marginTop='10px'; sum.style.fontWeight='900'; sum.style.color='#ffd67c';
  sum.textContent = `Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ÛŒ: ${res.total} Ø§Ø² 50`;
  resultsArea.appendChild(sum);

  finalChoice.style.display = 'block';
}

/* ---------- Ù‚ÙÙ„ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± ÙˆÙ‚ØªÛŒ Ø²Ù…Ø§Ù† ØªÙ…Ø§Ù… Ø´Ø¯ ---------- */
function autoFinish(){
  // disable UI
  disableInputs();
  const res = gradeAll();
  showResults(res);
  timerEl.textContent = '00:00';
}

/* ---------- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ---------- */
function disableInputs(){
  q1Input.disabled = true; q2Input.disabled = true; q3Input.disabled = true;
  [q4True,q4False,q5True,q5False].forEach(b=> b.disabled = true);
  finishBtn.disabled = true;
  startBtn.disabled = false;
}
function enableInputs(){
  q1Input.disabled = false; q2Input.disabled = false; q3Input.disabled = false;
  [q4True,q4False,q5True,q5False].forEach(b=> b.disabled = false);
  finishBtn.disabled = false;
}

startBtn.addEventListener('click', ()=>{
  // reset fields
  q1Input.value = ''; q2Input.value = ''; q3Input.value = '';
  selectedQ4 = null; selectedQ5 = null;
  [q4True,q4False,q5True,q5False].forEach(b=> b.classList.remove('selected'));
  resultsArea.innerHTML = '';
  finalChoice.style.display = 'none';
  learnedMsg.textContent = '';
  enableInputs();
  startTimer();
});

finishBtn.addEventListener('click', ()=>{
  clearInterval(timerInterval);
  disableInputs();
  const res = gradeAll();
  showResults(res);
  timerEl.textContent = formatTime(timeLeft);
});

/* ---------- Ù¾Ø§Ø³Ø® Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ù„Ù‡/Ø®ÛŒØ± ---------- */
learnedYes.addEventListener('click', ()=> {
  learnedMsg.textContent = 'ÛŒÙ Ø¨Ø§Ø±ÛŒÚ©Ù„Ø§Ø§Ø§Ø§Ø§!!! ğŸ‰ ØªÙˆ Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯ÛŒ.';
  learnedMsg.style.color = 'var(--good)';
});
learnedNo.addEventListener('click', ()=> {
  learnedMsg.textContent = 'Ø¹Ù‡Ù‡ â€” Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†Ø› Ø§Ø² Ø§ÙˆÙ„ Ù…Ø±ÙˆØ± Ú©Ù† Ùˆ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¯Ù‡.';
  learnedMsg.style.color = 'var(--bad)';
});

/* ---------- ÙˆÙ‚ØªÛŒ ØµÙØ­Ù‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯ ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
  timerEl.textContent = formatTime(timeLeft);
  // Ù†Ù…ÙˆØ¯Ø§Ø±: Ø¯Ø§ÛŒØ±Ù‡â€ŒÙ‡Ø§ Ùˆ Ø§Ø¹Ø¯Ø§Ø¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø¯Ø± DOM Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡â€ŒØ§Ù†Ø¯Ø› ØªØºÛŒÛŒØ±Ø§Øª Ø¸Ø§Ù‡Ø±ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯
});
</script>
</body>
</html>
